(()=>{"use strict";const t=(t,e,a)=>{e&&(e.innerHTML="",e.insertAdjacentHTML("afterbegin",t.map(a).join("")))},e=(t,e)=>parseFloat(100*t*e/100).toFixed(2),a=t=>{const e=document.querySelector("[data-cart-qty]"),a=document.querySelector("[data-cart-total]");e.textContent=(t=>t.reduce(((t,{cartQty:e})=>t+e),0))(t),a&&(a.textContent=`$${(t=>t.reduce(((t,{price:e,cartQty:a})=>t+100*e*a/100),0).toFixed(2))(t)}`)};(()=>{const c=document.querySelector("[data-cart-list]");let r=JSON.parse(localStorage.getItem("cart-items"))||[];const n=t=>`\n    <div data-item-id="${t.id}">    \n      <div class="product">\n        <ion-icon name="close-circle" data-cart-remove></ion-icon>\n        <img src="./img/${t.img}" />\n        <span>${t.name}</span>\n      </div>\n      <div class="price">$${t.price.toFixed(2)}</div>\n      <div class="quantity">\n        <ion-icon class="decrease" name="arrow-dropleft-circle" data-cart-decrease>\n        </ion-icon>\n        <span data-cart-item-qty>${t.cartQty}</span>\n        <ion-icon class="increase" name="arrow-dropright-circle" data-cart-increase>\n        </ion-icon>\n      </div>\n      <div class="total" data-cart-item-total>$${e(t.price,t.cartQty)}</div>\n    </div>`;r.length>0&&t(r,c,n),c&&c.addEventListener("click",(t=>{const c=t.target;if(!c.closest("[data-cart-remove], [data-cart-decrease], [data-cart-increase]"))return;const n=c.closest("[data-item-id]"),{itemId:i}=n.dataset,o=(s=r,d=parseInt(i),s.find((t=>t.id===d)));var s,d;const l=n.querySelector("[data-cart-item-qty]"),m=n.querySelector("[data-cart-item-total]"),y=t=>{l.textContent=`${t.cartQty}`,m.textContent=`$${e(t.cartQty,t.price)}`};c.closest("[data-cart-remove]")&&(n.remove(),r=r.filter((t=>t.id!==parseInt(i)))),c.closest("[data-cart-decrease]")&&(o.cartQty--,o.cartQty<=0&&(o.cartQty=1),y(o)),c.closest("[data-cart-increase]")&&(o.cartQty++,y(o)),localStorage.setItem("cart-items",JSON.stringify(r)),a(r)})),window.addEventListener("storage",(e=>{"cart-items"===e.key&&(r=JSON.parse(localStorage.getItem("cart-items")),t(r,c,n),a(r))})),a(r)})()})();